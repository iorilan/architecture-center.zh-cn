---
title: 将企业移动到 Azure 的最佳实践 | Microsoft Docs
description: 本文介绍一个基架，企业可以使用它来确保环境的安全性与可管理性。
services: azure-resource-manager
documentationcenter: na
author: rdendtler
manager: timlt
editor: tysonn
ms.assetid: 8692f37e-4d33-4100-b472-a8da37ce628f
ms.service: azure-resource-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/31/2017
ms.author: rodend;karlku;tomfitz
ms.openlocfilehash: 8bc2ed253b951ea04eb25b76f67dcc2092dc94ad
ms.sourcegitcommit: 4ec010846b9b5545c843a32e08293f906e512302
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/17/2018
---
# <a name="azure-enterprise-scaffold---prescriptive-subscription-governance"></a><span data-ttu-id="031fd-103">Azure 企业基架 - 出于合规目的监管订阅</span><span class="sxs-lookup"><span data-stu-id="031fd-103">Azure enterprise scaffold - prescriptive subscription governance</span></span>
<span data-ttu-id="031fd-104">为了敏捷性和灵活性，企业越来越多地采用公有云。</span><span class="sxs-lookup"><span data-stu-id="031fd-104">Enterprises are increasingly adopting the public cloud for its agility and flexibility.</span></span> <span data-ttu-id="031fd-105">它们利用云的优势来产生营收或优化企业资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-105">They are utilizing the cloud's strengths to generate revenue or optimize resources for the business.</span></span> <span data-ttu-id="031fd-106">Microsoft Azure 提供多种不同的服务，企业可以像构建块一样将它们组合，解决广泛的工作负荷与应用程序需求。</span><span class="sxs-lookup"><span data-stu-id="031fd-106">Microsoft Azure provides a multitude of services that enterprises can assemble like building blocks to address a wide array of workloads and applications.</span></span> 

<span data-ttu-id="031fd-107">但是，往往难以知道从何处着手。</span><span class="sxs-lookup"><span data-stu-id="031fd-107">But, knowing where to begin is often difficult.</span></span> <span data-ttu-id="031fd-108">决定使用 Azure 之后，经常会涌现以下几个问题：</span><span class="sxs-lookup"><span data-stu-id="031fd-108">After deciding to use Azure, a few questions commonly arise:</span></span>

* <span data-ttu-id="031fd-109">“如何满足特定国家/地区针对数据所有权制定的法规要求？”</span><span class="sxs-lookup"><span data-stu-id="031fd-109">"How do I meet our legal requirements for data sovereignty in certain countries?"</span></span>
* <span data-ttu-id="031fd-110">“如何确保用户不会无意中更改关键系统？”</span><span class="sxs-lookup"><span data-stu-id="031fd-110">"How do I ensure that someone does not inadvertently change a critical system?"</span></span>
* <span data-ttu-id="031fd-111">“怎么知道每个资源是否发挥了作用，以便可以准确地做出规划和预算？”</span><span class="sxs-lookup"><span data-stu-id="031fd-111">"How do I know what every resource is supporting so I can account for it and bill it back accurately?"</span></span>

<span data-ttu-id="031fd-112">不带任何防护措施的空白订阅，其前景是让人担忧的。</span><span class="sxs-lookup"><span data-stu-id="031fd-112">The prospect of an empty subscription with no guard rails is daunting.</span></span> <span data-ttu-id="031fd-113">如果不在这方面有所作为，可能会给 Azure 过渡造成阻碍。</span><span class="sxs-lookup"><span data-stu-id="031fd-113">This blank space can hamper your move to Azure.</span></span>

<span data-ttu-id="031fd-114">本文为技术专业人员提供一个起点，帮助他们解决监管需求，并在监管需求与敏捷性需求之间权衡利弊。</span><span class="sxs-lookup"><span data-stu-id="031fd-114">This article provides a starting point for technical professionals to address the need for governance, and balance it with the need for agility.</span></span> <span data-ttu-id="031fd-115">其中会介绍企业基架的概念，它可以引导组织实施和管理 Azure 订阅。</span><span class="sxs-lookup"><span data-stu-id="031fd-115">It introduces the concept of an enterprise scaffold that guides organizations in implementing and managing their Azure subscriptions.</span></span> 

## <a name="need-for-governance"></a><span data-ttu-id="031fd-116">监管需求</span><span class="sxs-lookup"><span data-stu-id="031fd-116">Need for governance</span></span>
<span data-ttu-id="031fd-117">在过渡到 Azure 时，必须提前解决监管方面的问题，确保成功地在企业中利用云。</span><span class="sxs-lookup"><span data-stu-id="031fd-117">When moving to Azure, you must address the topic of governance early to ensure the successful use of the cloud within the enterprise.</span></span> <span data-ttu-id="031fd-118">遗憾的是，建立全面监管系统所花费的时间和存在的官僚主义，意味着某些业务小组必须直接与供应商对话，而不与企业 IT 部门沟通。</span><span class="sxs-lookup"><span data-stu-id="031fd-118">Unfortunately, the time and bureaucracy of creating a comprehensive governance system means some business groups go directly to vendors without involving enterprise IT.</span></span> <span data-ttu-id="031fd-119">如果资源未得到正确管理，这种方法可能会导致企业出现漏洞。</span><span class="sxs-lookup"><span data-stu-id="031fd-119">This approach can leave the enterprise open to vulnerabilities if the resources are not properly managed.</span></span> <span data-ttu-id="031fd-120">公有云的特征 - 敏捷性、灵活性和基于消耗量的定价 - 对于需要快速满足客户（内部和外部）需求的业务小组而言非常重要。</span><span class="sxs-lookup"><span data-stu-id="031fd-120">The characteristics of the public cloud - agility, flexibility, and consumption-based pricing - are important to business groups that need to quickly meet the demands of customers (both internal and external).</span></span> <span data-ttu-id="031fd-121">但是，企业 IT 部门需要确保有效地保护数据和系统。</span><span class="sxs-lookup"><span data-stu-id="031fd-121">But, enterprise IT needs to ensure that data and systems are effectively protected.</span></span>

<span data-ttu-id="031fd-122">在现实生活中，我们可以使用基架来打好建筑物的基础。</span><span class="sxs-lookup"><span data-stu-id="031fd-122">In real life, scaffolding is used to create the basis of the structure.</span></span> <span data-ttu-id="031fd-123">基架主导总体框架，为需要安装的更长久系统提供定位点。</span><span class="sxs-lookup"><span data-stu-id="031fd-123">The scaffold guides the general outline, and provides anchor points for more permanent systems to be mounted.</span></span> <span data-ttu-id="031fd-124">企业基架也是如此：一套灵活的控制机制和 Azure 功能为环境提供结构，为公有云上生成的服务提供定位点。</span><span class="sxs-lookup"><span data-stu-id="031fd-124">An enterprise scaffold is the same: a set of flexible controls and Azure capabilities that provide structure to the environment, and anchors for services built on the public cloud.</span></span> <span data-ttu-id="031fd-125">它为构建者（IT 人员和业务小组）提供创建和附加新服务的基础。</span><span class="sxs-lookup"><span data-stu-id="031fd-125">It provides the builders (IT and business groups) a foundation to create and attach new services.</span></span>

<span data-ttu-id="031fd-126">该基架建立在我们与各种规模的客户交往时收获的实践经验基础之上。</span><span class="sxs-lookup"><span data-stu-id="031fd-126">The scaffold is based on practices we have gathered from many engagements with clients of various sizes.</span></span> <span data-ttu-id="031fd-127">这些客户既包括在云中开发解决方案的小型组织，也包括财富 500 强企业，还包括在云中迁移和开发解决方案的独立软件供应商。</span><span class="sxs-lookup"><span data-stu-id="031fd-127">Those clients range from small organizations developing solutions in the cloud to Fortune 500 enterprises and independent software vendors who are migrating and developing solutions in the cloud.</span></span> <span data-ttu-id="031fd-128">企业基架采用灵活设计，为传统的 IT 工作负载和敏捷工作负载提供有针对性的支持；例如，开发人员可以基于 Azure 功能创建软件即服务 (SaaS) 应用程序。</span><span class="sxs-lookup"><span data-stu-id="031fd-128">The enterprise scaffold is "purpose-built" to be flexible to support both traditional IT workloads and agile workloads; such as, developers creating software-as-a-service (SaaS) applications based on Azure capabilities.</span></span>

<span data-ttu-id="031fd-129">企业基架旨在用作 Azure 中每个新订阅的基础。</span><span class="sxs-lookup"><span data-stu-id="031fd-129">The enterprise scaffold is intended to be the foundation of each new subscription within Azure.</span></span> <span data-ttu-id="031fd-130">它能使管理员确保工作负荷满足组织的最低监管要求，同时又不妨碍业务小组和开发人员尽快实现自身的目标。</span><span class="sxs-lookup"><span data-stu-id="031fd-130">It enables administrators to ensure workloads meet the minimum governance requirements of an organization without preventing business groups and developers from quickly meeting their own goals.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="031fd-131">监管对于 Azure 的成功至关重要。</span><span class="sxs-lookup"><span data-stu-id="031fd-131">Governance is crucial to the success of Azure.</span></span> <span data-ttu-id="031fd-132">本文阐述企业基架的技术实现，不过，对于宏观的流程以及组件之间的关系，只是一笔带过。</span><span class="sxs-lookup"><span data-stu-id="031fd-132">This article targets the technical implementation of an enterprise scaffold but only touches on the broader process and relationships between the components.</span></span> <span data-ttu-id="031fd-133">策略监管的流程是自顶向下实施的，由企业的目标决定。</span><span class="sxs-lookup"><span data-stu-id="031fd-133">Policy governance flows from the top down and is determined by what the business wants to achieve.</span></span> <span data-ttu-id="031fd-134">为 Azure 创建的监管模型自然包括 IT 部门的主张，但更重要的是，它应该融入业务小组负责人以及安全和风险管理部门的有力表述。</span><span class="sxs-lookup"><span data-stu-id="031fd-134">Naturally, the creation of a governance model for Azure includes representatives from IT, but more importantly it should have strong representation from business group leaders, and security and risk management.</span></span> <span data-ttu-id="031fd-135">最终，企业基架都应该缓解业务风险，帮助实现组织的使命和目标。</span><span class="sxs-lookup"><span data-stu-id="031fd-135">In the end, an enterprise scaffold is about mitigating business risk to facilitate an organization's mission and objectives.</span></span>
> 
> 

<span data-ttu-id="031fd-136">下图描绘了基架的组件。</span><span class="sxs-lookup"><span data-stu-id="031fd-136">The following image describes the components of the scaffold.</span></span> <span data-ttu-id="031fd-137">基础依赖于坚实的部门、帐户和订阅计划。</span><span class="sxs-lookup"><span data-stu-id="031fd-137">The foundation relies on a solid plan for departments, accounts, and subscriptions.</span></span> <span data-ttu-id="031fd-138">支柱包括 Resource Manager 策略和强有力的命名标准。</span><span class="sxs-lookup"><span data-stu-id="031fd-138">The pillars consist of Resource Manager policies and strong naming standards.</span></span> <span data-ttu-id="031fd-139">基架的剩余部分由 Azure 核心功能和特性构成，它们实现一个可托管的安全环境。</span><span class="sxs-lookup"><span data-stu-id="031fd-139">The rest of the scaffold comes from core Azure capabilities and features that enable a secure and manageable environment.</span></span>

![基架组件](./_images/components.png)

> [!NOTE]
> <span data-ttu-id="031fd-141">Azure 自 2008 年推出以来不断快速发展。</span><span class="sxs-lookup"><span data-stu-id="031fd-141">Azure has grown rapidly since its introduction in 2008.</span></span> <span data-ttu-id="031fd-142">这种发展要求 Microsoft 工程团队反复思考服务的管理和部署方式。</span><span class="sxs-lookup"><span data-stu-id="031fd-142">This growth required Microsoft engineering teams to rethink their approach for managing and deploying services.</span></span> <span data-ttu-id="031fd-143">Azure 资源管理器模型在 2014 年推出，现已取代经典部署模型。</span><span class="sxs-lookup"><span data-stu-id="031fd-143">The Azure Resource Manager model was introduced in 2014 and replaces the classic deployment model.</span></span> <span data-ttu-id="031fd-144">组织可以使用 Resource Manager 更轻松地部署、管理和控制 Azure 资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-144">Resource Manager enables organizations to more easily deploy, organize, and control Azure resources.</span></span> <span data-ttu-id="031fd-145">Resource Manager 在创建资源时允许并行化，可以更快部署复杂、相互依赖的解决方案。</span><span class="sxs-lookup"><span data-stu-id="031fd-145">Resource Manager includes parallelization when creating resources for faster deployment of complex, interdependent solutions.</span></span> <span data-ttu-id="031fd-146">它还包括精细访问控制，能够使用元数据标记资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-146">It also includes granular access control, and the ability to tag resources with metadata.</span></span> <span data-ttu-id="031fd-147">Microsoft 建议通过 Resource Manager 模型创建所有资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-147">Microsoft recommends that you create all resources through the Resource Manager model.</span></span> <span data-ttu-id="031fd-148">企业基架是专门针对 Resource Manager 模型设计的。</span><span class="sxs-lookup"><span data-stu-id="031fd-148">The enterprise scaffold is explicitly designed for the Resource Manager model.</span></span>
> 
> 

## <a name="define-your-hierarchy"></a><span data-ttu-id="031fd-149">定义层次结构</span><span class="sxs-lookup"><span data-stu-id="031fd-149">Define your hierarchy</span></span>
<span data-ttu-id="031fd-150">基架的基础是 Azure 企业许可登记表（和企业门户）。</span><span class="sxs-lookup"><span data-stu-id="031fd-150">The foundation of the scaffold is the Azure Enterprise Enrollment (and the Enterprise Portal).</span></span> <span data-ttu-id="031fd-151">企业许可登记表定义 Azure 服务在公司内部的形式与用法，属于核心监管结构。</span><span class="sxs-lookup"><span data-stu-id="031fd-151">The enterprise enrollment defines the shape and use of Azure services within a company and is the core governance structure.</span></span> <span data-ttu-id="031fd-152">在企业协议中，客户可以将环境进一步细分为部门、帐户，最终细分为订阅。</span><span class="sxs-lookup"><span data-stu-id="031fd-152">Within the enterprise agreement, customers are able to further subdivide the environment into departments, accounts, and finally, subscriptions.</span></span> <span data-ttu-id="031fd-153">Azure 订阅是包含所有资源的基本单位。</span><span class="sxs-lookup"><span data-stu-id="031fd-153">An Azure subscription is the basic unit where all resources are contained.</span></span> <span data-ttu-id="031fd-154">它还定义 Azure 中的多种限制，例如核心数、资源数，等等。</span><span class="sxs-lookup"><span data-stu-id="031fd-154">It also defines several limits within Azure, such as number of cores, resources, etc.</span></span>

![层次结构](./_images/agreement.png)

<span data-ttu-id="031fd-156">每家企业都是独特的，使用上图中的层次结构可以在公司内部十分灵活地对 Azure 进行组织。</span><span class="sxs-lookup"><span data-stu-id="031fd-156">Every enterprise is different and the hierarchy in the previous image allows for significant flexibility in how Azure is organized within the company.</span></span> <span data-ttu-id="031fd-157">在实施本文档中的指导之前，应该为层次结构建模，了解对帐单、资源访问权限和复杂性造成的影响。</span><span class="sxs-lookup"><span data-stu-id="031fd-157">Before implementing the guidance contained in this document, you should model your hierarchy and understand the impact on billing, resource access, and complexity.</span></span>

<span data-ttu-id="031fd-158">Azure 注册的三种常见模式为：</span><span class="sxs-lookup"><span data-stu-id="031fd-158">The three common patterns for Azure Enrollments are:</span></span>

* <span data-ttu-id="031fd-159">**功能**模式</span><span class="sxs-lookup"><span data-stu-id="031fd-159">The **functional** pattern</span></span>
  
    ![功能](./_images/functional.png)
* <span data-ttu-id="031fd-161">**业务单位**模式</span><span class="sxs-lookup"><span data-stu-id="031fd-161">The **business unit** pattern</span></span> 
  
    ![业务](./_images/business.png)
* <span data-ttu-id="031fd-163">**地理**模式</span><span class="sxs-lookup"><span data-stu-id="031fd-163">The **geographic** pattern</span></span>
  
    ![地理](./_images/geographic.png)

<span data-ttu-id="031fd-165">可以在订阅级别应用基架，将企业的监管要求扩展到订阅中。</span><span class="sxs-lookup"><span data-stu-id="031fd-165">You apply the scaffold at the subscription level to extend the governance requirements of the enterprise into the subscription.</span></span>

## <a name="naming-standards"></a><span data-ttu-id="031fd-166">命名标准</span><span class="sxs-lookup"><span data-stu-id="031fd-166">Naming standards</span></span>
<span data-ttu-id="031fd-167">基架的第一个支柱是命名标准。</span><span class="sxs-lookup"><span data-stu-id="031fd-167">The first pillar of the scaffold is naming standards.</span></span> <span data-ttu-id="031fd-168">使用妥善设计的命名标准，可以在门户、帐单和脚本中识别资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-168">Well-designed naming standards enable you to identify resources in the portal, on a bill, and within scripts.</span></span> <span data-ttu-id="031fd-169">企业很可能已针对本地基础结构制定了命名标准。</span><span class="sxs-lookup"><span data-stu-id="031fd-169">Most likely, you already have naming standards for on-premises infrastructure.</span></span> <span data-ttu-id="031fd-170">将 Azure 添加到环境时，应该将这些命名标准扩展到 Azure 资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-170">When adding Azure to your environment, you should extend those naming standards to your Azure resources.</span></span> <span data-ttu-id="031fd-171">命名约定有助于在所有级别提高环境管理的效率。</span><span class="sxs-lookup"><span data-stu-id="031fd-171">Naming standard facilitate more efficient management of the environment at all levels.</span></span>

> [!TIP]
> <span data-ttu-id="031fd-172">关于命名约定：</span><span class="sxs-lookup"><span data-stu-id="031fd-172">For naming conventions:</span></span>
> * <span data-ttu-id="031fd-173">如果可能，请审阅并采纳[模式与实践指南](../best-practices/naming-conventions.md)。</span><span class="sxs-lookup"><span data-stu-id="031fd-173">Review and adopt where possible the [Patterns and Practices guidance](../best-practices/naming-conventions.md).</span></span> <span data-ttu-id="031fd-174">可以借助此指南来确定一套有意义的命名标准。</span><span class="sxs-lookup"><span data-stu-id="031fd-174">This guidance helps you decide on a meaningful naming standard.</span></span>
> * <span data-ttu-id="031fd-175">对资源名称使用骆驼拼写法（例如，myResourceGroup 和 vnetNetworkName）。</span><span class="sxs-lookup"><span data-stu-id="031fd-175">Use camelCasing for names of resources (such as myResourceGroup and vnetNetworkName).</span></span> <span data-ttu-id="031fd-176">注意：某些资源，例如存储帐户，只允许使用小写字母（不能包括其他特殊字符）。</span><span class="sxs-lookup"><span data-stu-id="031fd-176">Note: There are certain resources, such as storage accounts, where the only option is to use lower case (and no other special characters).</span></span>
> * <span data-ttu-id="031fd-177">考虑使用 Azure 资源管理器策略（下一部分会介绍）强制实施命名标准。</span><span class="sxs-lookup"><span data-stu-id="031fd-177">Consider using Azure Resource Manager policies (described in the next section) to enforce naming standards.</span></span>
> 
> <span data-ttu-id="031fd-178">前面的提示可帮助实现一致的命名约定。</span><span class="sxs-lookup"><span data-stu-id="031fd-178">The preceding tips help you implement a consistent naming convention.</span></span>

## <a name="policies-and-auditing"></a><span data-ttu-id="031fd-179">策略和审核</span><span class="sxs-lookup"><span data-stu-id="031fd-179">Policies and auditing</span></span>
<span data-ttu-id="031fd-180">基架的第二个支柱涉及到创建 [Azure 策略](/azure/azure-policy/azure-policy-introduction)和[审核活动日志](/azure/azure-resource-manager/resource-group-audit)。</span><span class="sxs-lookup"><span data-stu-id="031fd-180">The second pillar of the scaffold involves creating [Azure policies](/azure/azure-policy/azure-policy-introduction) and [auditing the activity log](/azure/azure-resource-manager/resource-group-audit).</span></span> <span data-ttu-id="031fd-181">使用 Resource Manager 可以控制 Azure 中的风险。</span><span class="sxs-lookup"><span data-stu-id="031fd-181">Resource Manager policies provide you with the ability to manage risk in Azure.</span></span> <span data-ttu-id="031fd-182">可以定义策略，通过限制、强制实施或审核特定的操作来确保数据所有权。</span><span class="sxs-lookup"><span data-stu-id="031fd-182">You can define policies that ensure data sovereignty by restricting, enforcing, or auditing certain actions.</span></span> 

* <span data-ttu-id="031fd-183">策略是默认的**允许**系统。</span><span class="sxs-lookup"><span data-stu-id="031fd-183">Policy is a default **allow** system.</span></span> <span data-ttu-id="031fd-184">通过针对资源定义并分配策略以便拒绝或审核针对资源执行的操作，来控制这些操作。</span><span class="sxs-lookup"><span data-stu-id="031fd-184">You control actions by defining and assigning policies to resources that deny or audit actions on resources.</span></span>
* <span data-ttu-id="031fd-185">策略由策略定义（采用某种策略定义语言，if-then 条件）描述。</span><span class="sxs-lookup"><span data-stu-id="031fd-185">Policies are described by policy definitions in a policy definition language (if-then conditions).</span></span>
* <span data-ttu-id="031fd-186">使用 JSON（Javascript 对象表示法）格式的文件创建策略。</span><span class="sxs-lookup"><span data-stu-id="031fd-186">You create polices with JSON (Javascript Object Notation) formatted files.</span></span> <span data-ttu-id="031fd-187">定义策略后，将其分配到特定的范围：订阅、资源组或资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-187">After defining a policy, you assign it to a particular scope: subscription, resource group, or resource.</span></span>

<span data-ttu-id="031fd-188">策略包含多个操作，从而可以根据方案采用精细控制方法。</span><span class="sxs-lookup"><span data-stu-id="031fd-188">Policies have multiple actions that allow for a fine-grained approach to your scenarios.</span></span> <span data-ttu-id="031fd-189">操作包括：</span><span class="sxs-lookup"><span data-stu-id="031fd-189">The actions are:</span></span>

* <span data-ttu-id="031fd-190">**拒绝**：阻止资源请求</span><span class="sxs-lookup"><span data-stu-id="031fd-190">**Deny**: Blocks the resource request</span></span>
* <span data-ttu-id="031fd-191">**审核**：允许请求，但在活动日志中添加一行（可用于提供警报或触发 Runbook）</span><span class="sxs-lookup"><span data-stu-id="031fd-191">**Audit**: Allows the request but adds a line to the activity log (which can be used to provide alerts or to trigger runbooks)</span></span>
* <span data-ttu-id="031fd-192">**追加**：将指定的信息添加到资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-192">**Append**: Adds specified information to the resource.</span></span> <span data-ttu-id="031fd-193">例如，如果某个资源没有“CostCenter”标记，则添加该标记并使用默认值。</span><span class="sxs-lookup"><span data-stu-id="031fd-193">For example, if there is not a "CostCenter" tag on a resource, add that tag with a default value.</span></span>

### <a name="common-uses-of-resource-manager-policies"></a><span data-ttu-id="031fd-194">Resource Manager 策略的常见用途</span><span class="sxs-lookup"><span data-stu-id="031fd-194">Common uses of Resource Manager policies</span></span>
<span data-ttu-id="031fd-195">Azure 资源管理器策略是 Azure 工具包中的一个强大工具。</span><span class="sxs-lookup"><span data-stu-id="031fd-195">Azure Resource Manager policies are a powerful tool in the Azure toolkit.</span></span> <span data-ttu-id="031fd-196">使用这些策略可以避免意外的成本，通过标记识别资源的成本中心，以及确保满足法规要求。</span><span class="sxs-lookup"><span data-stu-id="031fd-196">They enable you to avoid unexpected costs, to identify a cost center for resources through tagging, and to ensure that compliancy requirements are met.</span></span> <span data-ttu-id="031fd-197">将策略与内置审核功能相结合，可以创建复杂而灵活的解决方案。</span><span class="sxs-lookup"><span data-stu-id="031fd-197">When policies are combined with the built-in auditing features, you can fashion complex and flexible solutions.</span></span> <span data-ttu-id="031fd-198">策略允许公司针对“传统 IT”工作负荷和“敏捷”工作负荷（例如，开发客户应用程序）提供控制。</span><span class="sxs-lookup"><span data-stu-id="031fd-198">Policies allow companies to provide controls for "Traditional IT" workloads and "Agile" workloads; such as, developing customer applications.</span></span> <span data-ttu-id="031fd-199">策略的最常见模式包括：</span><span class="sxs-lookup"><span data-stu-id="031fd-199">The most common patterns we see for policies are:</span></span>

* <span data-ttu-id="031fd-200">**地域法规遵从/数据所有权** - Azure 在全球各区域运营。</span><span class="sxs-lookup"><span data-stu-id="031fd-200">**Geo-compliance/data sovereignty** - Azure provides regions across the world.</span></span> <span data-ttu-id="031fd-201">企业总是希望能够控制创建资源的位置（不管是为了确保数据所有权，还是只为了确保在靠近最终使用者的位置创建资源）。</span><span class="sxs-lookup"><span data-stu-id="031fd-201">Enterprises often wish to control where resources are created (whether to ensure data sovereignty or just to ensure resources are created close to the end consumers of the resources).</span></span>
* <span data-ttu-id="031fd-202">**成本管理** - 一个 Azure 订阅可以包含多种类型和规模的资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-202">**Cost management** - An Azure subscription can contain resources of many types and scale.</span></span> <span data-ttu-id="031fd-203">公司总是希望标准订阅能够避免不必要地使用大型资源，否则每月需要损耗数百美元甚至更多。</span><span class="sxs-lookup"><span data-stu-id="031fd-203">Corporations often wish to ensure that standard subscriptions avoid using unnecessarily large resources, which can cost hundreds of dollars a month or more.</span></span>
* <span data-ttu-id="031fd-204">**通过必需标记进行默认监管** - 要求使用标记，是最常见的且客户最想要的功能之一。</span><span class="sxs-lookup"><span data-stu-id="031fd-204">**Default governance through required tags** - Requiring tags is one of the most common and highly desired features.</span></span> <span data-ttu-id="031fd-205">使用 Azure 资源管理器策略，企业可以确保适当地标记资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-205">Using Azure Resource Manager Policies enterprises are able to ensure that a resource is appropriately tagged.</span></span> <span data-ttu-id="031fd-206">最常见的标记包括：部门、资源所有者和环境类型（例如生产、测试、开发）</span><span class="sxs-lookup"><span data-stu-id="031fd-206">The most common tags are: Department, Resource Owner, and Environment type (for example - production, test, development)</span></span>

<span data-ttu-id="031fd-207">**示例**</span><span class="sxs-lookup"><span data-stu-id="031fd-207">**Examples**</span></span>

<span data-ttu-id="031fd-208">业务线应用程序的“传统 IT”订阅</span><span class="sxs-lookup"><span data-stu-id="031fd-208">"Traditional IT" subscription for line-of-business applications</span></span>

* <span data-ttu-id="031fd-209">强制针对所有资源使用“部门”和“所有者”标记</span><span class="sxs-lookup"><span data-stu-id="031fd-209">Enforce Department and Owner tags on all resources</span></span>
* <span data-ttu-id="031fd-210">仅限在北美区域创建资源</span><span class="sxs-lookup"><span data-stu-id="031fd-210">Restrict resource creation to the North American Region</span></span>
* <span data-ttu-id="031fd-211">仅限创建 G 系列 VM 和 HDInsight 群集</span><span class="sxs-lookup"><span data-stu-id="031fd-211">Restrict the ability to create G-Series VMs and HDInsight Clusters</span></span>

<span data-ttu-id="031fd-212">创建云应用程序的业务单位使用的“敏捷”环境</span><span class="sxs-lookup"><span data-stu-id="031fd-212">"Agile" Environment for a business unit creating cloud applications</span></span>

* <span data-ttu-id="031fd-213">为满足数据所有权要求，只允许在特定区域创建资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-213">To meet data sovereignty requirements, allow the creation of resources ONLY in a specific region.</span></span>
* <span data-ttu-id="031fd-214">强制针对所有资源使用“环境”标记。</span><span class="sxs-lookup"><span data-stu-id="031fd-214">Enforce Environment tag on all resources.</span></span> <span data-ttu-id="031fd-215">如果创建的资源不带标记，则在该资源后面追加“环境: 未知”标记。</span><span class="sxs-lookup"><span data-stu-id="031fd-215">If a resource is created without a tag, append the **Environment: Unknown** tag to the resource.</span></span>
* <span data-ttu-id="031fd-216">如果资源在北美以外的区域创建，则审核资源，但不阻止创建资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-216">Audit when resources are created outside of North America but do not prevent.</span></span>
* <span data-ttu-id="031fd-217">创建高成本资源时审核。</span><span class="sxs-lookup"><span data-stu-id="031fd-217">Audit when high-cost resources are created.</span></span>

> [!TIP]
> <span data-ttu-id="031fd-218">跨组织使用 Resource Manager 策略的最常见场合是控制可以在*哪里*创建资源，以及可以创建*什么*类型的资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-218">The most common use of Resource Manager policies across organizations is to control *where* resources can be created and *what* types of resources can be created.</span></span> <span data-ttu-id="031fd-219">除了针对*哪里*和*什么*提供控件以外，许多企业还使用策略来确保资源包含相应的元数据，能够抵消使用费。</span><span class="sxs-lookup"><span data-stu-id="031fd-219">In addition to providing controls on *where* and *what*, many enterprises use policies to ensure resources have the appropriate metadata to bill back for consumption.</span></span> <span data-ttu-id="031fd-220">对于以下目的，建议在订阅级别应用策略：</span><span class="sxs-lookup"><span data-stu-id="031fd-220">We recommend applying policies at the subscription level for:</span></span>
> 
> * <span data-ttu-id="031fd-221">地域法规遵从/数据所有权</span><span class="sxs-lookup"><span data-stu-id="031fd-221">Geo-compliance/data sovereignty</span></span>
> * <span data-ttu-id="031fd-222">成本管理</span><span class="sxs-lookup"><span data-stu-id="031fd-222">Cost management</span></span>
> * <span data-ttu-id="031fd-223">必需标记（由业务需求决定，例如“付款人”、“应用程序所有者”）</span><span class="sxs-lookup"><span data-stu-id="031fd-223">Required tags (Determined by business need, such as BillTo, Application Owner)</span></span>
> 
> <span data-ttu-id="031fd-224">可在更低的范围级别应用其他策略。</span><span class="sxs-lookup"><span data-stu-id="031fd-224">You can apply additional policies at lower levels of scope.</span></span>
> 
> 

### <a name="audit---what-happened"></a><span data-ttu-id="031fd-225">审核 - 发生了什么？</span><span class="sxs-lookup"><span data-stu-id="031fd-225">Audit - what happened?</span></span>
<span data-ttu-id="031fd-226">若要查看环境是否正常运行，需要审核用户活动。</span><span class="sxs-lookup"><span data-stu-id="031fd-226">To view how your environment is functioning, you need to audit user activity.</span></span> <span data-ttu-id="031fd-227">Azure 中的大多数资源类型都会创建诊断日志，可以通过日志工具或在 Azure Log Analytics 中对其进行分析。</span><span class="sxs-lookup"><span data-stu-id="031fd-227">Most resource types within Azure create diagnostic logs that you can analyze through a log tool or in Azure Log Analytics.</span></span> <span data-ttu-id="031fd-228">可以跨多个订阅收集活动日志，提供部门或企业视图。</span><span class="sxs-lookup"><span data-stu-id="031fd-228">You can gather activity logs across multiple subscriptions to provide a departmental or enterprise view.</span></span> <span data-ttu-id="031fd-229">审核记录既是一个重要的诊断工具，也是在 Azure 环境中触发事件的关键机制。</span><span class="sxs-lookup"><span data-stu-id="031fd-229">Audit records are both an important diagnostic tool and a crucial mechanism to trigger events in the Azure environment.</span></span>

<span data-ttu-id="031fd-230">使用 Resource Manager 部署中的活动日志，可以确定执行了哪些**操作**，以及谁执行了这些操作。</span><span class="sxs-lookup"><span data-stu-id="031fd-230">Activity logs from Resource Manager deployments enable you to determine the **operations** that took place and who performed them.</span></span> <span data-ttu-id="031fd-231">可以使用 Log Analytics 等工具来收集和聚合活动日志。</span><span class="sxs-lookup"><span data-stu-id="031fd-231">Activity logs can be collected and aggregated using tools like Log Analytics.</span></span>

## <a name="resource-tags"></a><span data-ttu-id="031fd-232">资源标记</span><span class="sxs-lookup"><span data-stu-id="031fd-232">Resource tags</span></span>
<span data-ttu-id="031fd-233">随着组织中的用户不断地在订阅中添加资源，将资源与相应的部门、客户和环境相关联就变得越发重要。</span><span class="sxs-lookup"><span data-stu-id="031fd-233">As users in your organization add resources to the subscription, it becomes increasingly important to associate resources with the appropriate department, customer, and environment.</span></span> <span data-ttu-id="031fd-234">可以通过[标记](/azure/azure-resource-manager/resource-group-using-tags)将元数据附加到资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-234">You can attach metadata to resources through [tags](/azure/azure-resource-manager/resource-group-using-tags).</span></span> <span data-ttu-id="031fd-235">可以使用标记提供有关资源或所有者的信息。</span><span class="sxs-lookup"><span data-stu-id="031fd-235">You use tags to provide information about the resource or the owner.</span></span> <span data-ttu-id="031fd-236">使用标记不仅可以通过多种方式聚合与分组资源，而且还能使用这些数据实现费用分摊的目的。</span><span class="sxs-lookup"><span data-stu-id="031fd-236">Tags enable you to not only aggregate and group resources in various ways, but use that data for the purposes of chargeback.</span></span> <span data-ttu-id="031fd-237">可以标记最多包含 15 个“键:值”对的资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-237">You can tag resources with up to 15 key:value pairs.</span></span> 

<span data-ttu-id="031fd-238">资源标记十分灵活，应附加到大多数资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-238">Resource tags are flexible and should be attached to most resources.</span></span> <span data-ttu-id="031fd-239">常见的资源标记示例包括：</span><span class="sxs-lookup"><span data-stu-id="031fd-239">Examples of common resource tags are:</span></span>

* <span data-ttu-id="031fd-240">付款人</span><span class="sxs-lookup"><span data-stu-id="031fd-240">BillTo</span></span>
* <span data-ttu-id="031fd-241">部门（或业务单位）</span><span class="sxs-lookup"><span data-stu-id="031fd-241">Department (or Business Unit)</span></span>
* <span data-ttu-id="031fd-242">环境（生产、过渡、开发）</span><span class="sxs-lookup"><span data-stu-id="031fd-242">Environment (Production, Stage, Development)</span></span>
* <span data-ttu-id="031fd-243">层（Web 层、应用程序层）</span><span class="sxs-lookup"><span data-stu-id="031fd-243">Tier (Web Tier, Application Tier)</span></span>
* <span data-ttu-id="031fd-244">应用程序所有者</span><span class="sxs-lookup"><span data-stu-id="031fd-244">Application Owner</span></span>
* <span data-ttu-id="031fd-245">项目名称</span><span class="sxs-lookup"><span data-stu-id="031fd-245">ProjectName</span></span>

![标记](./_images/resource-group-tagging.png)

<span data-ttu-id="031fd-247">有关标记的示例，请参阅 [Recommended naming conventions for Azure resources](../best-practices/naming-conventions.md)（Azure 资源的建议命名约定）。</span><span class="sxs-lookup"><span data-stu-id="031fd-247">For more examples of tags, see [Recommended naming conventions for Azure resources](../best-practices/naming-conventions.md).</span></span>

> [!TIP]
> <span data-ttu-id="031fd-248">考虑制定强制要求对以下各项使用标记的策略：</span><span class="sxs-lookup"><span data-stu-id="031fd-248">Consider making a policy that mandates tagging for:</span></span>
> 
> * <span data-ttu-id="031fd-249">资源组</span><span class="sxs-lookup"><span data-stu-id="031fd-249">Resource groups</span></span>
> * <span data-ttu-id="031fd-250">存储</span><span class="sxs-lookup"><span data-stu-id="031fd-250">Storage</span></span>
> * <span data-ttu-id="031fd-251">虚拟机</span><span class="sxs-lookup"><span data-stu-id="031fd-251">Virtual Machines</span></span>
> * <span data-ttu-id="031fd-252">应用程序服务环境/Web 服务器</span><span class="sxs-lookup"><span data-stu-id="031fd-252">Application Service Environments/web servers</span></span>
> 
> <span data-ttu-id="031fd-253">此标记策略标识业务、财务、安全、风险管理和综合环境管理需要各个订阅中的哪些元数据。</span><span class="sxs-lookup"><span data-stu-id="031fd-253">This tagging strategy identifies across your subscriptions what metadata is needed for the business, finance, security, risk management, and overall management of the environment.</span></span> 

## <a name="resource-group"></a><span data-ttu-id="031fd-254">资源组</span><span class="sxs-lookup"><span data-stu-id="031fd-254">Resource group</span></span>
<span data-ttu-id="031fd-255">使用 Resource Manager 可将资源放入有意义的组中，便于管理、记帐或自然关联。</span><span class="sxs-lookup"><span data-stu-id="031fd-255">Resource Manager enables you to put resources into meaningful groups for management, billing, or natural affinity.</span></span> <span data-ttu-id="031fd-256">如前所述，Azure 有两种部署模型。</span><span class="sxs-lookup"><span data-stu-id="031fd-256">As mentioned earlier, Azure has two deployment models.</span></span> <span data-ttu-id="031fd-257">在早期的经典模型中，管理的基本单位是订阅。</span><span class="sxs-lookup"><span data-stu-id="031fd-257">In the earlier Classic model, the basic unit of management was the subscription.</span></span> <span data-ttu-id="031fd-258">订阅中的资源很难分解，导致需要创建大量的订阅。</span><span class="sxs-lookup"><span data-stu-id="031fd-258">It was difficult to break down resources within a subscription, which led to the creation of large numbers of subscriptions.</span></span> <span data-ttu-id="031fd-259">Resource Manager 模型中引入了资源组。</span><span class="sxs-lookup"><span data-stu-id="031fd-259">With the Resource Manager model, we saw the introduction of resource groups.</span></span> <span data-ttu-id="031fd-260">资源组是具有相同生命周期的或共享某个属性（例如“所有 SQL 服务器”或“应用程序 A”）的资源的容器。</span><span class="sxs-lookup"><span data-stu-id="031fd-260">Resource groups are containers of resources that have a common lifecycle or share an attribute such as "all SQL servers" or "Application A".</span></span>

<span data-ttu-id="031fd-261">资源组不能彼此包含，资源只能属于一个资源组。</span><span class="sxs-lookup"><span data-stu-id="031fd-261">Resource groups cannot be contained within each other and resources can only belong to one resource group.</span></span> <span data-ttu-id="031fd-262">可以针对资源组中的所有资源应用特定操作。</span><span class="sxs-lookup"><span data-stu-id="031fd-262">You can apply certain actions on all resources in a resource group.</span></span> <span data-ttu-id="031fd-263">例如，删除某个资源组会删除该资源组中的所有资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-263">For example, deleting a resource group removes all resources within the resource group.</span></span> <span data-ttu-id="031fd-264">通常，可将整个应用程序或相关系统放在同一个资源组中。</span><span class="sxs-lookup"><span data-stu-id="031fd-264">Typically, you place an entire application or related system in the same resource group.</span></span> <span data-ttu-id="031fd-265">例如，名为 Contoso Web 应用程序的三层应用程序在同一个资源组中包含 Web 服务器、应用程序服务器和 SQL 服务器。</span><span class="sxs-lookup"><span data-stu-id="031fd-265">For example, a three-tier application called Contoso Web Application would contain the web server, application server and SQL server in the same resource group.</span></span>

> [!TIP]
> <span data-ttu-id="031fd-266">资源组的组织方式根据“传统 IT”工作负荷与“敏捷 IT”工作负荷而有所不同：</span><span class="sxs-lookup"><span data-stu-id="031fd-266">How you organize your resource groups may vary from "Traditional IT" workloads to "Agile IT" workloads:</span></span>
> 
> * <span data-ttu-id="031fd-267">“传统 IT”工作负荷通常按同一生命周期中的项（例如某个应用程序）分组。</span><span class="sxs-lookup"><span data-stu-id="031fd-267">"Traditional IT" workloads are most commonly grouped by items within the same lifecycle, such as an application.</span></span> <span data-ttu-id="031fd-268">由于可按应用程序分组，因此可以管理每个应用程序。</span><span class="sxs-lookup"><span data-stu-id="031fd-268">Grouping by application allows for individual application management.</span></span>
> * <span data-ttu-id="031fd-269">“敏捷 IT”工作负荷往往侧重面向外部客户的云应用程序。</span><span class="sxs-lookup"><span data-stu-id="031fd-269">"Agile IT" workloads tend to focus on external customer-facing cloud applications.</span></span> <span data-ttu-id="031fd-270">资源组应反映部署层（如 Web 层、应用程序层）和管理层。</span><span class="sxs-lookup"><span data-stu-id="031fd-270">The resource groups should reflect the layers of deployment (such as Web Tier, App Tier) and management.</span></span>
> 
> <span data-ttu-id="031fd-271">了解工作负荷可帮助制定资源组策略。</span><span class="sxs-lookup"><span data-stu-id="031fd-271">Understanding your workload helps you develop a resource group strategy.</span></span>

## <a name="role-based-access-control"></a><span data-ttu-id="031fd-272">基于角色的访问控制</span><span class="sxs-lookup"><span data-stu-id="031fd-272">Role-based access control</span></span>
<span data-ttu-id="031fd-273">我们可能会问自己，“谁才有权访问资源？”</span><span class="sxs-lookup"><span data-stu-id="031fd-273">You probably are asking yourself "who should have access to resources?"</span></span> <span data-ttu-id="031fd-274">或者“如何控制这种访问权限？”</span><span class="sxs-lookup"><span data-stu-id="031fd-274">and "how do I control this access?"</span></span> <span data-ttu-id="031fd-275">允许或禁止访问 Azure 门户，以及控制在门户中对资源的访问至关重要。</span><span class="sxs-lookup"><span data-stu-id="031fd-275">Allowing or disallowing access to the Azure portal, and controlling access to resources in the portal is crucial.</span></span> 

<span data-ttu-id="031fd-276">Azure 在最初发布时，对订阅的访问控制非常直接：只允许管理员或共同管理员访问。</span><span class="sxs-lookup"><span data-stu-id="031fd-276">When Azure was initially released, access controls to a subscription were basic: Administrator or Co-Administrator.</span></span> <span data-ttu-id="031fd-277">有权访问经典模型中的订阅意味着有权访问门户中的所有资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-277">Access to a subscription in the Classic model implied access to all the resources in the portal.</span></span> <span data-ttu-id="031fd-278">缺少精细控制导致需要衍生订阅来针对 Azure 注册提供合理的访问控制级别。</span><span class="sxs-lookup"><span data-stu-id="031fd-278">This lack of fine-grained control led to the proliferation of subscriptions to provide a level of reasonable access control for an Azure Enrollment.</span></span>

<span data-ttu-id="031fd-279">现在不再需要衍生订阅。</span><span class="sxs-lookup"><span data-stu-id="031fd-279">This proliferation of subscriptions is no longer needed.</span></span> <span data-ttu-id="031fd-280">使用基于角色的访问控制，可将用户分配到标准角色（例如常见的“读取者”和“写入者”角色类型）。</span><span class="sxs-lookup"><span data-stu-id="031fd-280">With role-based access control, you can assign users to standard roles (such as common "reader" and "writer" types of roles).</span></span> <span data-ttu-id="031fd-281">还可以自定义角色。</span><span class="sxs-lookup"><span data-stu-id="031fd-281">You can also define custom roles.</span></span>

> [!TIP]
> <span data-ttu-id="031fd-282">实现基于角色的访问控制：</span><span class="sxs-lookup"><span data-stu-id="031fd-282">To implement role-based access control:</span></span>
> * <span data-ttu-id="031fd-283">使用 AD Connect 工具将企业标识存储（最常见的包括 Active Directory）连接到 Azure Active Directory。</span><span class="sxs-lookup"><span data-stu-id="031fd-283">Connect your corporate identity store (most commonly Active Directory) to Azure Active Directory using the AD Connect tool.</span></span>
> * <span data-ttu-id="031fd-284">使用托管标记控制管理员/共同管理员订阅。</span><span class="sxs-lookup"><span data-stu-id="031fd-284">Control the Admin/Co-Admin of a subscription using a managed identity.</span></span> <span data-ttu-id="031fd-285">**不要**将管理员/共同管理员分配到新的订阅所有者。</span><span class="sxs-lookup"><span data-stu-id="031fd-285">**Don't** assign Admin/Co-admin to a new subscription owner.</span></span> <span data-ttu-id="031fd-286">而要使用 RBAC 角色为组或个人提供“所有者”权限。</span><span class="sxs-lookup"><span data-stu-id="031fd-286">Instead, use RBAC roles to provide **Owner** rights to a group or individual.</span></span>
> * <span data-ttu-id="031fd-287">将 Azure 用户添加到 Active Directory 中的组（例如，应用程序 X 所有者）。</span><span class="sxs-lookup"><span data-stu-id="031fd-287">Add Azure users to a group (for example, Application X Owners) in Active Directory.</span></span> <span data-ttu-id="031fd-288">使用同步组为组成员提供适当的权限来管理包含应用程序的资源组。</span><span class="sxs-lookup"><span data-stu-id="031fd-288">Use the synced group to provide group members the appropriate rights to manage the resource group containing the application.</span></span>
> * <span data-ttu-id="031fd-289">遵循授予**最低特权**的原则，以便完成所需的工作。</span><span class="sxs-lookup"><span data-stu-id="031fd-289">Follow the principle of granting the **least privilege** required to do the expected work.</span></span> <span data-ttu-id="031fd-290">例如：</span><span class="sxs-lookup"><span data-stu-id="031fd-290">For example:</span></span>
>   * <span data-ttu-id="031fd-291">部署组：只能部署资源的组。</span><span class="sxs-lookup"><span data-stu-id="031fd-291">Deployment Group: A group that is only able to deploy resources.</span></span>
>   * <span data-ttu-id="031fd-292">虚拟机管理：能够重新启动 VM（为了操作）的组</span><span class="sxs-lookup"><span data-stu-id="031fd-292">Virtual Machine Management: A group that is able to restart VMs (for operations)</span></span>
> 
> <span data-ttu-id="031fd-293">这些提示可帮助跨订阅管理用户访问。</span><span class="sxs-lookup"><span data-stu-id="031fd-293">These tips help you manage user access across your subscription.</span></span>

## <a name="azure-resource-locks"></a><span data-ttu-id="031fd-294">Azure 资源锁</span><span class="sxs-lookup"><span data-stu-id="031fd-294">Azure resource locks</span></span>
<span data-ttu-id="031fd-295">随着组织不断在订阅中添加核心服务，确保这些服务随时可用，避免业务中断已变得越来越重要。</span><span class="sxs-lookup"><span data-stu-id="031fd-295">As your organization adds core services to the subscription, it becomes increasingly important to ensure that those services are available to avoid business disruption.</span></span> <span data-ttu-id="031fd-296">使用[资源锁](/azure/azure-resource-manager/resource-group-lock-resources)可以限制针对高价值资源（修改或删除这些资源会给应用程序或云基础结构造成重大影响）的操作。</span><span class="sxs-lookup"><span data-stu-id="031fd-296">[Resource locks](/azure/azure-resource-manager/resource-group-lock-resources) enable you to restrict operations on high-value resources where modifying or deleting them would have a significant impact on your applications or cloud infrastructure.</span></span> <span data-ttu-id="031fd-297">可以将锁应用于订阅、资源组或资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-297">You can apply locks to a subscription, resource group, or resource.</span></span> <span data-ttu-id="031fd-298">通常，我们会将锁应用于虚拟网络、网关和存储帐户等基础资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-298">Typically, you apply locks to foundational resources such as virtual networks, gateways, and storage accounts.</span></span> 

<span data-ttu-id="031fd-299">资源锁目前支持两个值：CanNotDelete 和 ReadOnly。</span><span class="sxs-lookup"><span data-stu-id="031fd-299">Resource locks currently support two values: CanNotDelete and ReadOnly.</span></span> <span data-ttu-id="031fd-300">CanNotDelete 表示用户（具有相应权限）仍可读取或修改某个资源，但无法删除该资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-300">CanNotDelete means that users (with the appropriate rights) can still read or modify a resource but cannot delete it.</span></span> <span data-ttu-id="031fd-301">ReadOnly 表示经过授权的用户无法删除或修改某个资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-301">ReadOnly means that authorized users can't delete or modify a resource.</span></span>

<span data-ttu-id="031fd-302">若要创建或删除管理锁，必须有权执行 `Microsoft.Authorization/*` 或 `Microsoft.Authorization/locks/*` 操作。</span><span class="sxs-lookup"><span data-stu-id="031fd-302">To create or delete management locks, you must have access to `Microsoft.Authorization/*` or `Microsoft.Authorization/locks/*` actions.</span></span>
<span data-ttu-id="031fd-303">在内置角色中，只有“所有者”和“用户访问管理员”有权执行这些操作。</span><span class="sxs-lookup"><span data-stu-id="031fd-303">Of the built-in roles, only Owner and User Access Administrator are granted those actions.</span></span>

> [!TIP]
> <span data-ttu-id="031fd-304">应该用锁保护核心网络选项。</span><span class="sxs-lookup"><span data-stu-id="031fd-304">Core network options should be protected with locks.</span></span> <span data-ttu-id="031fd-305">意外删除网关或站点到站点 VPN 会给 Azure 订阅造成严重影响。</span><span class="sxs-lookup"><span data-stu-id="031fd-305">Accidental deletion of a gateway, site-to-site VPN would be disastrous to an Azure subscription.</span></span> <span data-ttu-id="031fd-306">Azure 不允许删除正在使用的虚拟网络，但应用更多限制是有利的预防措施。</span><span class="sxs-lookup"><span data-stu-id="031fd-306">Azure doesn't allow you to delete a virtual network that is in use, but applying more restrictions is a helpful precaution.</span></span> 
> 
> * <span data-ttu-id="031fd-307">虚拟网络：CanNotDelete</span><span class="sxs-lookup"><span data-stu-id="031fd-307">Virtual Network: CanNotDelete</span></span>
> * <span data-ttu-id="031fd-308">网络安全组：CanNotDelete</span><span class="sxs-lookup"><span data-stu-id="031fd-308">Network Security Group: CanNotDelete</span></span>
> * <span data-ttu-id="031fd-309">策略：CanNotDelete</span><span class="sxs-lookup"><span data-stu-id="031fd-309">Policies: CanNotDelete</span></span>
> 
> <span data-ttu-id="031fd-310">此外，策略对于相应控制机制的维护至关重要。</span><span class="sxs-lookup"><span data-stu-id="031fd-310">Policies are also crucial to the maintenance of appropriate controls.</span></span> <span data-ttu-id="031fd-311">建议对使用中的策略应用 **CanNotDelete** 锁。</span><span class="sxs-lookup"><span data-stu-id="031fd-311">We recommend that you apply a **CanNotDelete** lock to polices that are in use.</span></span>

## <a name="core-networking-resources"></a><span data-ttu-id="031fd-312">核心网络资源</span><span class="sxs-lookup"><span data-stu-id="031fd-312">Core networking resources</span></span>
<span data-ttu-id="031fd-313">对资源的访问可能是从内部（在企业网络中）或外部（通过 Internet）发起的。</span><span class="sxs-lookup"><span data-stu-id="031fd-313">Access to resources can be either internal (within the corporation's network) or external (through the internet).</span></span> <span data-ttu-id="031fd-314">组织中的用户经常会无意中将资源放在错误的位置，使其遭到恶意访问。</span><span class="sxs-lookup"><span data-stu-id="031fd-314">It is easy for users in your organization to inadvertently put resources in the wrong spot, and potentially open them to malicious access.</span></span> <span data-ttu-id="031fd-315">与对待本地设备一样，企业必须增设相应的控制机制，确保 Azure 用户做出正确的决策。</span><span class="sxs-lookup"><span data-stu-id="031fd-315">As with on-premises devices, enterprises must add appropriate controls to ensure that Azure users make the right decisions.</span></span> <span data-ttu-id="031fd-316">为了进行订阅监管，我们指定了可提供基本访问控制的核心资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-316">For subscription governance, we identify core resources that provide basic control of access.</span></span> <span data-ttu-id="031fd-317">这些核心资源包括：</span><span class="sxs-lookup"><span data-stu-id="031fd-317">The core resources consist of:</span></span>

* <span data-ttu-id="031fd-318">**虚拟网络**是子网的容器对象。</span><span class="sxs-lookup"><span data-stu-id="031fd-318">**Virtual networks** are container objects for subnets.</span></span> <span data-ttu-id="031fd-319">尽管严格意义上没有必要，但将应用程序连接到内部企业资源时往往要用到它。</span><span class="sxs-lookup"><span data-stu-id="031fd-319">Though not strictly necessary, it is often used when connecting applications to internal corporate resources.</span></span>
* <span data-ttu-id="031fd-320">**网络安全组**类似于防火墙，为资源如何通过网络“通信”提供规则。</span><span class="sxs-lookup"><span data-stu-id="031fd-320">**Network security groups** are similar to a firewall and provide rules for how a resource can "talk" over the network.</span></span> <span data-ttu-id="031fd-321">它们针对子网（或虚拟机）如何/是否能够连接到 Internet 或同一虚拟网络中的其他子网提供精细控制。</span><span class="sxs-lookup"><span data-stu-id="031fd-321">They provide granular control over how/if a subnet (or virtual machine) can connect to the Internet or other subnets in the same virtual network.</span></span>

![核心网络](./_images/core-network.png)

> [!TIP]
> <span data-ttu-id="031fd-323">关于网络：</span><span class="sxs-lookup"><span data-stu-id="031fd-323">For networking:</span></span>
> * <span data-ttu-id="031fd-324">为面向外部的工作负荷和面向内部的工作负荷创建专用的虚拟网络。</span><span class="sxs-lookup"><span data-stu-id="031fd-324">Create virtual networks dedicated to external-facing workloads and internal-facing workloads.</span></span> <span data-ttu-id="031fd-325">这种方法可以减少将原本用于内部工作负荷的虚拟机意外放入外向空间的可能性。</span><span class="sxs-lookup"><span data-stu-id="031fd-325">This approach reduces the chance of inadvertently placing virtual machines that are intended for internal workloads in an external facing space.</span></span>
> * <span data-ttu-id="031fd-326">配置网络安全组以限制访问。</span><span class="sxs-lookup"><span data-stu-id="031fd-326">Configure network security groups to limit access.</span></span> <span data-ttu-id="031fd-327">最起码应该阻止从内部虚拟网络访问 Internet，并阻止从外部虚拟网络访问企业网络。</span><span class="sxs-lookup"><span data-stu-id="031fd-327">At a minimum, block access to the internet from internal virtual networks, and block access to the corporate network from external virtual networks.</span></span>
> 
> <span data-ttu-id="031fd-328">这些提示可帮助实现安全的网络资源。</span><span class="sxs-lookup"><span data-stu-id="031fd-328">These tips help you implement secure networking resources.</span></span>

### <a name="automation"></a><span data-ttu-id="031fd-329">自动化</span><span class="sxs-lookup"><span data-stu-id="031fd-329">Automation</span></span>
<span data-ttu-id="031fd-330">单独管理每个资源不仅费时，而且在执行某些操作时还很容易出错。</span><span class="sxs-lookup"><span data-stu-id="031fd-330">Managing resources individually is both time-consuming and potentially error prone for certain operations.</span></span> <span data-ttu-id="031fd-331">Azure 提供多种自动化功能，包括 Azure 自动化、逻辑应用和 Azure Functions。</span><span class="sxs-lookup"><span data-stu-id="031fd-331">Azure provides various automation capabilities including Azure Automation, Logic Apps, and Azure Functions.</span></span> <span data-ttu-id="031fd-332">[Azure 自动化](/azure/automation/automation-intro)可让管理员创建和定义 Runbook 来处理常见的资源管理任务。</span><span class="sxs-lookup"><span data-stu-id="031fd-332">[Azure Automation](/azure/automation/automation-intro) enables administrators to create and define runbooks to handle common tasks in managing resources.</span></span> <span data-ttu-id="031fd-333">可以使用 PowerShell 代码编辑器或图形编辑器创建 Runbook。</span><span class="sxs-lookup"><span data-stu-id="031fd-333">You create runbooks by using either a PowerShell code editor or a graphical editor.</span></span> <span data-ttu-id="031fd-334">可以生成复杂的多阶段工作流。</span><span class="sxs-lookup"><span data-stu-id="031fd-334">You can produce complex multi-stage workflows.</span></span> <span data-ttu-id="031fd-335">Azure 自动化通常用于处理常见任务，例如，关闭未使用的资源，无需人工干预创建资源来响应特定的触发器。</span><span class="sxs-lookup"><span data-stu-id="031fd-335">Azure Automation is often used to handle common tasks such as shutting down unused resources, or creating resources in response to a specific trigger without needing human intervention.</span></span>

> [!TIP]
> <span data-ttu-id="031fd-336">关于自动化：</span><span class="sxs-lookup"><span data-stu-id="031fd-336">For automation:</span></span>
> * <span data-ttu-id="031fd-337">创建 Azure 自动化帐户，查看 [Runbook 库](/azure/automation/automation-runbook-gallery)中提供 Runbook（图形和命令行）。</span><span class="sxs-lookup"><span data-stu-id="031fd-337">Create an Azure Automation account and review the available runbooks (both graphical and command line) available in the [Runbook Gallery](/azure/automation/automation-runbook-gallery).</span></span>
> * <span data-ttu-id="031fd-338">导入并自定义重要的 Runbook 供自己使用。</span><span class="sxs-lookup"><span data-stu-id="031fd-338">Import and customize key runbooks for your own use.</span></span>
> 
> <span data-ttu-id="031fd-339">一种常见方案是按计划启动/关闭虚拟机。</span><span class="sxs-lookup"><span data-stu-id="031fd-339">A common scenario is the ability to Start/Shutdown virtual machines on a schedule.</span></span> <span data-ttu-id="031fd-340">库中提供了示例 Runbook，它们可以处理这种方案，同时解释如何对其扩展。</span><span class="sxs-lookup"><span data-stu-id="031fd-340">There are example runbooks that are available in the Gallery that both handle this scenario and teach you how to expand it.</span></span>
> 
> 

## <a name="azure-security-center"></a><span data-ttu-id="031fd-341">Azure 安全中心</span><span class="sxs-lookup"><span data-stu-id="031fd-341">Azure Security Center</span></span>
<span data-ttu-id="031fd-342">在采用云的过程中，最大的阻碍之一也许是安全忧虑。</span><span class="sxs-lookup"><span data-stu-id="031fd-342">Perhaps one of the biggest blockers to cloud adoption has been the concerns over security.</span></span> <span data-ttu-id="031fd-343">IT 风险管理人员和安全部门需确保 Azure 中资源的安全。</span><span class="sxs-lookup"><span data-stu-id="031fd-343">IT risk managers and security departments need to ensure that resources in Azure are secure.</span></span> 

<span data-ttu-id="031fd-344">[Azure 安全中心](/azure/security-center/security-center-intro)在一个中心视图中提供订阅中资源的安全状态，并提供建议帮助避免资源泄密。</span><span class="sxs-lookup"><span data-stu-id="031fd-344">The [Azure Security Center](/azure/security-center/security-center-intro) provides a central view of the security status of resources in the subscriptions, and provides recommendations that help prevent compromised resources.</span></span> <span data-ttu-id="031fd-345">它支持更精细的策略（例如，向特定的资源组应用策略，使企业能够根据面临的风险调整立场）。</span><span class="sxs-lookup"><span data-stu-id="031fd-345">It can enable more granular policies (for example, applying policies to specific resource groups that allow the enterprise to tailor their posture to the risk they are addressing).</span></span> <span data-ttu-id="031fd-346">最后，Azure 安全中心是一个开放式平台，允许 Microsoft 合作伙伴和独立软件供应商创建可与 Azure 安全中心对接的软件来增强其功能。</span><span class="sxs-lookup"><span data-stu-id="031fd-346">Finally, Azure Security Center is an open platform that enables Microsoft partners and independent software vendors to create software that plugs into Azure Security Center to enhance its capabilities.</span></span> 

> [!TIP]
> <span data-ttu-id="031fd-347">Azure 安全中心默认已在每个订阅中启用。</span><span class="sxs-lookup"><span data-stu-id="031fd-347">Azure Security Center is enabled by default in each subscription.</span></span> <span data-ttu-id="031fd-348">但是，必须通过虚拟机启用数据收集，才能允许 Azure 安全中心安装其代理并开始收集数据。</span><span class="sxs-lookup"><span data-stu-id="031fd-348">However, you must enable data collection from virtual machines to allow Azure Security Center to install its agent and begin gathering data.</span></span>
> 
> ![数据收集](./_images/data-collection.png)
> 
> 

## <a name="next-steps"></a><span data-ttu-id="031fd-350">后续步骤</span><span class="sxs-lookup"><span data-stu-id="031fd-350">Next steps</span></span>
* <span data-ttu-id="031fd-351">了解订阅监管后，接下来可以了解如何实施这些建议。</span><span class="sxs-lookup"><span data-stu-id="031fd-351">Now that you have learned about subscription governance, it's time to see these recommendations in practice.</span></span> <span data-ttu-id="031fd-352">请参阅 [Examples of implementing Azure subscription governance](subscription-governance-examples.md)（Azure 订阅监管实施示例）。</span><span class="sxs-lookup"><span data-stu-id="031fd-352">See [Examples of implementing Azure subscription governance](subscription-governance-examples.md).</span></span>
